<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fits a decision tree in one data set and tests the performance in another — cross_validate • sctree</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fits a decision tree in one data set and tests the performance in another — cross_validate" />
<meta property="og:description" content="Fits a decision tree in one data set and tests the performance in another" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sctree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sctree.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/antibody_query.html">Query Antibody vendors from inside R</a>
    </li>
    <li>
      <a href="../articles/plot_flowstyle.html">Flow style plotting</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fits a decision tree in one data set and tests the performance in another</h1>
    
    <div class="hidden name"><code>cross_validate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits a decision tree in one data set and tests the performance in another</p>
    </div>

    <pre class="usage"><span class='fu'>cross_validate</span>(
  <span class='no'>train</span>,
  <span class='no'>test</span>,
  <span class='no'>cluster</span>,
  <span class='kw'>genes_use</span> <span class='kw'>=</span> <span class='kw pkg'>Seurat</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/Seurat/man/VariableFeatures.html'>VariableFeatures</a></span>(<span class='no'>train</span>),
  <span class='kw'>warn.gene.removal</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>train</th>
      <td><p>a Seurat object to be used for trainning.</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>another Seurat object to be used for testing.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>the cluster whose equivalence needs to be found.</p></td>
    </tr>
    <tr>
      <th>genes_use</th>
      <td><p>character vector specifying which genes to use for the
classification, defaults to Seurat::VariableFeatures(train)</p></td>
    </tr>
    <tr>
      <th>warn.gene.removal</th>
      <td><p>logical indicating wether to warn the user when
genes are removed because they are missing in one of the datasets.
defults to TRUE</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments to be passed to ranger_importances.Seurat</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list containing the
    (1) tree fit,
    (2) a summary_table
    (3) the concensus rules of the tree
    (4) ranger_significance_table
    (5) the suggested genes for the gating</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>cross_validate</span>(<span class='no'>small_5050_mix</span>, <span class='no'>small_9901_mix</span>, <span class='kw'>cluster</span> <span class='kw'>=</span> <span class='st'>"0"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Only few negative importance values found, inaccurate p-values. Consider the 'altmann' approach.</span>
#&gt; <span class='warning'>This can be done by setting the argument 'imp_method' to 'altmann', note that this method is extremely computationally intensive.</span>
#&gt; <span class='warning'>For more information please refer to ?ranger::ranger</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Some important genes were removed because they are not present in the test dataset. </span>
#&gt; <span class='warning'>Removed genes: ASNS, CD3D, HEY1, ADA, RPL26, XIST, CA2, TSC22D3, CDKN2A, AIF1, GAL, MDK, MAP1A, PSMB8, PSMB9, FAM127B, DMKN, TSTD1, PYGL, IFI16, KRT18, CSRP2, SPRED2, ZNF503, ZFAT, PRKAG2-AS1, CDC42EP1, CTC1, LBX1-AS1, HSPA1B, GTF2IRD1, HOXA9</span></div><div class='output co'>#&gt; $party_fit
#&gt; 
#&gt; Model formula:
#&gt; ident ~ ARHGDIB + TMSB4X + MZB1 + SOX4 + FYB + UBE2C + CD1E + 
#&gt;     HIST1H1E + ITGA4 + HIST1H4C + CXCR4 + CDK1 + CHI3L2 + ITM2A + 
#&gt;     ID3 + MALAT1 + JUN + C12orf57 + HIST1H1C + MYC + DDIT4 + 
#&gt;     HIST1H2BK + SH3TC1
#&gt; 
#&gt; Fitted party:
#&gt; [1] root
#&gt; |   [2] ARHGDIB &lt;= 2.29381
#&gt; |   |   [3] SOX4 &lt;= 2.74241: not clus 0 (n = 90, err = 27.8%)
#&gt; |   |   [4] SOX4 &gt; 2.74241: clus 0 (n = 8, err = 0.0%)
#&gt; |   [5] ARHGDIB &gt; 2.29381
#&gt; |   |   [6] DDIT4 &lt;= 2.13797: clus 0 (n = 148, err = 4.1%)
#&gt; |   |   [7] DDIT4 &gt; 2.13797: clus 0 (n = 9, err = 44.4%)
#&gt; 
#&gt; Number of inner nodes:    3
#&gt; Number of terminal nodes: 4
#&gt; 
#&gt; $confusion_matrix
#&gt;             cluster
#&gt; predicted      0   1   2
#&gt;   clus 0     263  98   8
#&gt;   not clus 0   0   0  15
#&gt; 
#&gt; $concensus_rules
#&gt; Cluster-clus 0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB +
#&gt; 	majority elements:
#&gt; 		DDIT4 -
#&gt; Cluster-not clus 0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB -
#&gt; 		SOX4 -
#&gt; 
#&gt; $ranger_significance_table
#&gt;            importance     pvalue       gene
#&gt; ASNS        6.0094119 0.00000000       ASNS
#&gt; ARHGDIB     5.1676992 0.00000000    ARHGDIB
#&gt; CD3D        4.8032257 0.00000000       CD3D
#&gt; TMSB4X      4.3671933 0.00000000     TMSB4X
#&gt; HEY1        3.4772237 0.00000000       HEY1
#&gt; ADA         3.1096150 0.00000000        ADA
#&gt; MZB1        2.3375299 0.00000000       MZB1
#&gt; RPL26       2.3216236 0.00000000      RPL26
#&gt; XIST        2.0958065 0.00000000       XIST
#&gt; CA2         1.9730605 0.00000000        CA2
#&gt; SOX4        1.9680173 0.00000000       SOX4
#&gt; TSC22D3     1.8654082 0.00000000    TSC22D3
#&gt; CDKN2A      1.7728410 0.00000000     CDKN2A
#&gt; AIF1        1.6844896 0.00000000       AIF1
#&gt; FYB         1.6233718 0.00000000        FYB
#&gt; GAL         1.1649316 0.00000000        GAL
#&gt; MDK         1.0080020 0.00000000        MDK
#&gt; UBE2C       0.9583872 0.00000000      UBE2C
#&gt; MAP1A       0.8532897 0.00000000      MAP1A
#&gt; CD1E        0.7916297 0.00000000       CD1E
#&gt; HIST1H1E    0.7725623 0.00000000   HIST1H1E
#&gt; PSMB8       0.7516684 0.00000000      PSMB8
#&gt; PSMB9       0.6452038 0.00000000      PSMB9
#&gt; FAM127B     0.6252417 0.00000000    FAM127B
#&gt; DMKN        0.6163686 0.00000000       DMKN
#&gt; TSTD1       0.5738816 0.00000000      TSTD1
#&gt; ITGA4       0.5449013 0.00000000      ITGA4
#&gt; HIST1H4C    0.5237232 0.00000000   HIST1H4C
#&gt; CXCR4       0.4811929 0.00000000      CXCR4
#&gt; CDK1        0.4179864 0.00000000       CDK1
#&gt; CHI3L2      0.3775718 0.00000000     CHI3L2
#&gt; PYGL        0.3621761 0.00000000       PYGL
#&gt; IFI16       0.2980396 0.00000000      IFI16
#&gt; ITM2A       0.2636847 0.00000000      ITM2A
#&gt; KRT18       0.2550561 0.00000000      KRT18
#&gt; CSRP2       0.2460805 0.00000000      CSRP2
#&gt; ID3         0.2459439 0.00000000        ID3
#&gt; MALAT1      0.2277814 0.01219512     MALAT1
#&gt; JUN         0.2170782 0.02439024        JUN
#&gt; SPRED2      0.2093111 0.02439024     SPRED2
#&gt; ZNF503      0.1942172 0.02439024     ZNF503
#&gt; ZFAT        0.1916341 0.02439024       ZFAT
#&gt; PRKAG2-AS1  0.1863027 0.02439024 PRKAG2-AS1
#&gt; CDC42EP1    0.1731541 0.02439024   CDC42EP1
#&gt; CTC1        0.1710720 0.02439024       CTC1
#&gt; C12orf57    0.1683163 0.02439024   C12orf57
#&gt; LBX1-AS1    0.1675656 0.02439024   LBX1-AS1
#&gt; HIST1H1C    0.1628978 0.02439024   HIST1H1C
#&gt; HSPA1B      0.1553756 0.02439024     HSPA1B
#&gt; MYC         0.1537134 0.03658537        MYC
#&gt; GTF2IRD1    0.1483967 0.04878049   GTF2IRD1
#&gt; HOXA9       0.1471439 0.04878049      HOXA9
#&gt; DDIT4       0.1449510 0.04878049      DDIT4
#&gt; HIST1H2BK   0.1363704 0.04878049  HIST1H2BK
#&gt; SH3TC1      0.1304120 0.04878049     SH3TC1
#&gt; 
#&gt; $gating_genes
#&gt; [1] "ARHGDIB" "SOX4"    "DDIT4"  
#&gt; </div><div class='input'><span class='fu'>cross_validate</span>(<span class='no'>small_5050_mix</span>, <span class='no'>small_9901_mix</span>, <span class='kw'>cluster</span> <span class='kw'>=</span> <span class='st'>"ALL"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Only few negative importance values found, inaccurate p-values. Consider the 'altmann' approach.</span>
#&gt; <span class='warning'>This can be done by setting the argument 'imp_method' to 'altmann', note that this method is extremely computationally intensive.</span>
#&gt; <span class='warning'>For more information please refer to ?ranger::ranger</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Some important genes were removed because they are not present in the test dataset. </span>
#&gt; <span class='warning'>Removed genes: ASNS, CD3D, ADA, HEY1, TSC22D3, RPL26, XIST, AIF1, MAP1A, CDKN2A, CA2, PSMB8, FAM127B, TSTD1, GAL, MDK, DMKN, CSRP2, ID2, KRT18, PSMB9, HSPA1B</span></div><div class='output co'>#&gt; $party_fit
#&gt; 
#&gt; Model formula:
#&gt; ident ~ TMSB4X + ARHGDIB + MZB1 + SOX4 + FYB + CD1E + UBE2C + 
#&gt;     HIST1H1E + HIST1H4C + ITM2A + IGLL1 + CXCR4 + CHI3L2 + HIST1H2BK + 
#&gt;     ITGA4 + DDIT4 + C12orf57 + HIST1H1C
#&gt; 
#&gt; Fitted party:
#&gt; [1] root
#&gt; |   [2] ARHGDIB &lt;= 2.29381
#&gt; |   |   [3] SOX4 &lt;= 2.74241: 1 (n = 90, err = 27.8%)
#&gt; |   |   [4] SOX4 &gt; 2.74241: 0 (n = 8, err = 0.0%)
#&gt; |   [5] ARHGDIB &gt; 2.29381
#&gt; |   |   [6] DDIT4 &lt;= 2.13797: 0 (n = 148, err = 4.1%)
#&gt; |   |   [7] DDIT4 &gt; 2.13797: 0 (n = 9, err = 44.4%)
#&gt; 
#&gt; Number of inner nodes:    3
#&gt; Number of terminal nodes: 4
#&gt; 
#&gt; $confusion_matrix
#&gt;          cluster
#&gt; predicted   0   1   2
#&gt;         0 263  98   8
#&gt;         1   0   0  15
#&gt; 
#&gt; $concensus_rules
#&gt; Cluster-0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB +
#&gt; 	majority elements:
#&gt; 		DDIT4 -
#&gt; Cluster-1: 
#&gt; 	all elements:
#&gt; 		ARHGDIB -
#&gt; 		SOX4 -
#&gt; 
#&gt; $ranger_significance_table
#&gt;           importance     pvalue      gene
#&gt; ASNS       5.6354842 0.00000000      ASNS
#&gt; CD3D       4.8789549 0.00000000      CD3D
#&gt; TMSB4X     4.3761890 0.00000000    TMSB4X
#&gt; ARHGDIB    4.2833060 0.00000000   ARHGDIB
#&gt; MZB1       3.4198224 0.00000000      MZB1
#&gt; ADA        3.1530134 0.00000000       ADA
#&gt; HEY1       2.8489714 0.00000000      HEY1
#&gt; TSC22D3    2.1903904 0.00000000   TSC22D3
#&gt; RPL26      2.1838063 0.00000000     RPL26
#&gt; XIST       2.1728741 0.00000000      XIST
#&gt; AIF1       2.0274626 0.00000000      AIF1
#&gt; SOX4       1.7082333 0.00000000      SOX4
#&gt; MAP1A      1.6491278 0.00000000     MAP1A
#&gt; FYB        1.4254269 0.00000000       FYB
#&gt; CDKN2A     1.3816793 0.00000000    CDKN2A
#&gt; CA2        1.3786192 0.00000000       CA2
#&gt; CD1E       0.9548178 0.00000000      CD1E
#&gt; UBE2C      0.9294106 0.00000000     UBE2C
#&gt; PSMB8      0.8618613 0.00000000     PSMB8
#&gt; FAM127B    0.7963698 0.00000000   FAM127B
#&gt; HIST1H1E   0.7267816 0.00000000  HIST1H1E
#&gt; TSTD1      0.7098676 0.00000000     TSTD1
#&gt; GAL        0.6304936 0.00000000       GAL
#&gt; HIST1H4C   0.6114589 0.00000000  HIST1H4C
#&gt; MDK        0.5016790 0.00000000       MDK
#&gt; ITM2A      0.4967601 0.00000000     ITM2A
#&gt; DMKN       0.4876830 0.00000000      DMKN
#&gt; CSRP2      0.4863419 0.00000000     CSRP2
#&gt; IGLL1      0.4115364 0.00000000     IGLL1
#&gt; ID2        0.3743618 0.01041667       ID2
#&gt; CXCR4      0.3713671 0.01041667     CXCR4
#&gt; KRT18      0.3702754 0.01041667     KRT18
#&gt; PSMB9      0.3702514 0.01041667     PSMB9
#&gt; CHI3L2     0.3552276 0.01041667    CHI3L2
#&gt; HIST1H2BK  0.3164331 0.02083333 HIST1H2BK
#&gt; ITGA4      0.3039233 0.02083333     ITGA4
#&gt; DDIT4      0.2642464 0.04166667     DDIT4
#&gt; HSPA1B     0.2380191 0.04166667    HSPA1B
#&gt; C12orf57   0.2359516 0.04166667  C12orf57
#&gt; HIST1H1C   0.2312922 0.04166667  HIST1H1C
#&gt; 
#&gt; $gating_genes
#&gt; [1] "ARHGDIB" "SOX4"    "DDIT4"  
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by J. Sebastian Paez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


