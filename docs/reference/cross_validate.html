<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fits a decision tree in one data set and tests the performance in another — cross_validate • sctree</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fits a decision tree in one data set and tests the performance in another — cross_validate" />
<meta property="og:description" content="Fits a decision tree in one data set and tests the performance in another" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sctree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sctree.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/antibody_query.html">Query Antibody vendors from inside R</a>
    </li>
    <li>
      <a href="../articles/plot_flowstyle.html">Flow style plotting</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fits a decision tree in one data set and tests the performance in another</h1>
    
    <div class="hidden name"><code>cross_validate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits a decision tree in one data set and tests the performance in another</p>
    </div>

    <pre class="usage"><span class='fu'>cross_validate</span>(<span class='no'>train</span>, <span class='no'>test</span>, <span class='no'>cluster</span>,
  <span class='kw'>genes_use</span> <span class='kw'>=</span> <span class='kw pkg'>Seurat</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/Seurat/man/VariableFeatures.html'>VariableFeatures</a></span>(<span class='no'>train</span>),
  <span class='kw'>warn.gene.removal</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>train</th>
      <td><p>a Seurat object to be used for trainning.</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>another Seurat object to be used for testing.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>the cluster whose equivalence needs to be found.</p></td>
    </tr>
    <tr>
      <th>genes_use</th>
      <td><p>character vector specifying which genes to use for the
classification, defaults to Seurat::VariableFeatures(train)</p></td>
    </tr>
    <tr>
      <th>warn.gene.removal</th>
      <td><p>logical indicating wether to warn the user when
genes are removed because they are missing in one of the datasets.
defults to TRUE</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments to be passed to ranger_importances.Seurat</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list containing the
    (1) tree fit,
    (2) a summary_table
    (3) the concensus rules of the tree
    (4) ranger_significance_table
    (5) the suggested genes for the gating</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>cross_validate</span>(<span class='no'>small_5050_mix</span>, <span class='no'>small_9901_mix</span>, <span class='kw'>cluster</span> <span class='kw'>=</span> <span class='st'>"0"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Only few negative importance values found, inaccurate p-values. Consider the 'altmann' approach.</span>
#&gt; <span class='warning'>This can be done by setting the argument 'imp_method' to 'altmann', note that this method is extremely computationally intensive.</span>
#&gt; <span class='warning'>For more information please refer to ?ranger::ranger</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Some important genes were removed because they are not present in the test dataset. </span>
#&gt; <span class='warning'>Removed genes: ASNS, CD3D, HEY1, ADA, XIST, CDKN2A, RPL26, TSC22D3, CA2, AIF1, GAL, MDK, MAP1A, PSMB9, TSTD1, FAM127B, ID2, DMKN, PSMB8, KRT18, HOXA9, ZNF503, MAP1B, PYGL, HSPA1B, CSRP2</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; $party_fit
#&gt; 
#&gt; Model formula:
#&gt; ident ~ ARHGDIB + TMSB4X + MZB1 + SOX4 + FYB + CD1E + UBE2C + 
#&gt;     HIST1H1E + ITGA4 + CDK1 + ITM2A + CHI3L2 + HIST1H4C + MALAT1 + 
#&gt;     JUN + CXCR4 + DDIT4 + HIST1H2BK
#&gt; 
#&gt; Fitted party:
#&gt; [1] root
#&gt; |   [2] ARHGDIB &lt;= 2.29381
#&gt; |   |   [3] SOX4 &lt;= 2.74241: not clus 0 (n = 90, err = 27.8%)
#&gt; |   |   [4] SOX4 &gt; 2.74241: clus 0 (n = 8, err = 0.0%)
#&gt; |   [5] ARHGDIB &gt; 2.29381
#&gt; |   |   [6] DDIT4 &lt;= 2.13797: clus 0 (n = 148, err = 4.1%)
#&gt; |   |   [7] DDIT4 &gt; 2.13797: clus 0 (n = 9, err = 44.4%)
#&gt; 
#&gt; Number of inner nodes:    3
#&gt; Number of terminal nodes: 4
#&gt; 
#&gt; $confusion_matrix
#&gt;             cluster
#&gt; predicted      0   1   2
#&gt;   clus 0     263  98   8
#&gt;   not clus 0   0   0  15
#&gt; 
#&gt; $concensus_rules
#&gt; Cluster-clus 0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB +
#&gt; 	majority elements:
#&gt; 		DDIT4 -
#&gt; Cluster-not clus 0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB -
#&gt; 		SOX4 -
#&gt; 
#&gt; $ranger_significance_table
#&gt;           importance      pvalue      gene
#&gt; ASNS       6.1981030 0.000000000      ASNS
#&gt; ARHGDIB    4.6568825 0.000000000   ARHGDIB
#&gt; CD3D       4.5486561 0.000000000      CD3D
#&gt; TMSB4X     3.8594044 0.000000000    TMSB4X
#&gt; HEY1       3.4640647 0.000000000      HEY1
#&gt; ADA        2.7639487 0.000000000       ADA
#&gt; MZB1       2.5351154 0.000000000      MZB1
#&gt; XIST       2.1050942 0.000000000      XIST
#&gt; CDKN2A     2.0906554 0.000000000    CDKN2A
#&gt; RPL26      2.0897659 0.000000000     RPL26
#&gt; SOX4       2.0034795 0.000000000      SOX4
#&gt; TSC22D3    1.9670025 0.000000000   TSC22D3
#&gt; CA2        1.9547972 0.000000000       CA2
#&gt; FYB        1.6685485 0.000000000       FYB
#&gt; AIF1       1.5561841 0.000000000      AIF1
#&gt; GAL        1.1628424 0.000000000       GAL
#&gt; MDK        1.0391597 0.000000000       MDK
#&gt; CD1E       0.9016758 0.000000000      CD1E
#&gt; UBE2C      0.7935225 0.009433962     UBE2C
#&gt; MAP1A      0.7925588 0.009433962     MAP1A
#&gt; PSMB9      0.6315636 0.009433962     PSMB9
#&gt; TSTD1      0.5575521 0.009433962     TSTD1
#&gt; HIST1H1E   0.5060435 0.009433962  HIST1H1E
#&gt; FAM127B    0.5018757 0.009433962   FAM127B
#&gt; ID2        0.4493514 0.009433962       ID2
#&gt; DMKN       0.4488922 0.009433962      DMKN
#&gt; PSMB8      0.4441328 0.009433962     PSMB8
#&gt; ITGA4      0.4201880 0.009433962     ITGA4
#&gt; CDK1       0.4042143 0.009433962      CDK1
#&gt; ITM2A      0.3883246 0.009433962     ITM2A
#&gt; KRT18      0.3738098 0.009433962     KRT18
#&gt; CHI3L2     0.3534820 0.009433962    CHI3L2
#&gt; HIST1H4C   0.3438604 0.009433962  HIST1H4C
#&gt; HOXA9      0.3198131 0.009433962     HOXA9
#&gt; ZNF503     0.3125776 0.009433962    ZNF503
#&gt; MALAT1     0.3075915 0.009433962    MALAT1
#&gt; JUN        0.3029134 0.009433962       JUN
#&gt; MAP1B      0.3000326 0.009433962     MAP1B
#&gt; PYGL       0.2815934 0.018867925      PYGL
#&gt; CXCR4      0.2759808 0.018867925     CXCR4
#&gt; DDIT4      0.2183946 0.028301887     DDIT4
#&gt; HSPA1B     0.2162486 0.028301887    HSPA1B
#&gt; HIST1H2BK  0.2082975 0.037735849 HIST1H2BK
#&gt; CSRP2      0.2003424 0.037735849     CSRP2
#&gt; 
#&gt; $gating_genes
#&gt; [1] "ARHGDIB" "SOX4"    "DDIT4"  
#&gt; </div><div class='input'><span class='fu'>cross_validate</span>(<span class='no'>small_5050_mix</span>, <span class='no'>small_9901_mix</span>, <span class='kw'>cluster</span> <span class='kw'>=</span> <span class='st'>"ALL"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Only few negative importance values found, inaccurate p-values. Consider the 'altmann' approach.</span>
#&gt; <span class='warning'>This can be done by setting the argument 'imp_method' to 'altmann', note that this method is extremely computationally intensive.</span>
#&gt; <span class='warning'>For more information please refer to ?ranger::ranger</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Some important genes were removed because they are not present in the test dataset. </span>
#&gt; <span class='warning'>Removed genes: ASNS, CD3D, ADA, HEY1, TSC22D3, XIST, MAP1A, RPL26, CA2, AIF1, CDKN2A, FAM127B, GAL, CSRP2, PSMB8, TSTD1, MDK, HOXA9, ZNF503, DMKN, ID2, CTC1, IFI16, KRT18, PYGL, PSMB9, MAP1B, SPRED2, RNF138, LNP1</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The following arguments are not used: uniq, cells.use</span></div><div class='output co'>#&gt; <span class='message'>Suggested parameter: cells instead of cells.use</span></div><div class='output co'>#&gt; $party_fit
#&gt; 
#&gt; Model formula:
#&gt; ident ~ TMSB4X + ARHGDIB + MZB1 + SOX4 + FYB + UBE2C + CD1E + 
#&gt;     ITM2A + HIST1H1E + HIST1H4C + DDIT4 + CHI3L2 + JUN + CDK1 + 
#&gt;     ITGA4 + CXCR4 + HIST1H1C + MYC
#&gt; 
#&gt; Fitted party:
#&gt; [1] root
#&gt; |   [2] ARHGDIB &lt;= 2.29381
#&gt; |   |   [3] SOX4 &lt;= 2.74241: 1 (n = 90, err = 27.8%)
#&gt; |   |   [4] SOX4 &gt; 2.74241: 0 (n = 8, err = 0.0%)
#&gt; |   [5] ARHGDIB &gt; 2.29381
#&gt; |   |   [6] DDIT4 &lt;= 2.13797: 0 (n = 148, err = 4.1%)
#&gt; |   |   [7] DDIT4 &gt; 2.13797: 0 (n = 9, err = 44.4%)
#&gt; 
#&gt; Number of inner nodes:    3
#&gt; Number of terminal nodes: 4
#&gt; 
#&gt; $confusion_matrix
#&gt;          cluster
#&gt; predicted   0   1   2
#&gt;         0 263  98   8
#&gt;         1   0   0  15
#&gt; 
#&gt; $concensus_rules
#&gt; Cluster-0: 
#&gt; 	all elements:
#&gt; 		ARHGDIB +
#&gt; 	majority elements:
#&gt; 		DDIT4 -
#&gt; Cluster-1: 
#&gt; 	all elements:
#&gt; 		ARHGDIB -
#&gt; 		SOX4 -
#&gt; 
#&gt; $ranger_significance_table
#&gt;          importance     pvalue     gene
#&gt; ASNS      5.0523069 0.00000000     ASNS
#&gt; CD3D      4.5759691 0.00000000     CD3D
#&gt; TMSB4X    4.3567501 0.00000000   TMSB4X
#&gt; ARHGDIB   4.3289627 0.00000000  ARHGDIB
#&gt; MZB1      3.5292376 0.00000000     MZB1
#&gt; ADA       3.0016297 0.00000000      ADA
#&gt; HEY1      2.7798605 0.00000000     HEY1
#&gt; TSC22D3   2.3415148 0.00000000  TSC22D3
#&gt; XIST      2.0798456 0.00000000     XIST
#&gt; SOX4      1.8714852 0.00000000     SOX4
#&gt; MAP1A     1.6867208 0.00000000    MAP1A
#&gt; RPL26     1.6366171 0.00000000    RPL26
#&gt; CA2       1.4931733 0.00000000      CA2
#&gt; AIF1      1.4917225 0.00000000     AIF1
#&gt; FYB       1.4892930 0.00000000      FYB
#&gt; CDKN2A    1.4302791 0.00000000   CDKN2A
#&gt; UBE2C     1.1031831 0.00000000    UBE2C
#&gt; CD1E      0.9464429 0.00000000     CD1E
#&gt; FAM127B   0.9218146 0.00000000  FAM127B
#&gt; GAL       0.7591950 0.00000000      GAL
#&gt; ITM2A     0.6595954 0.00000000    ITM2A
#&gt; HIST1H1E  0.6520071 0.00000000 HIST1H1E
#&gt; CSRP2     0.5320566 0.00000000    CSRP2
#&gt; HIST1H4C  0.4876504 0.01020408 HIST1H4C
#&gt; PSMB8     0.4840830 0.01020408    PSMB8
#&gt; DDIT4     0.3981723 0.01020408    DDIT4
#&gt; TSTD1     0.3894432 0.01020408    TSTD1
#&gt; MDK       0.3768194 0.01020408      MDK
#&gt; HOXA9     0.3689784 0.01020408    HOXA9
#&gt; ZNF503    0.3525577 0.01020408   ZNF503
#&gt; CHI3L2    0.3054693 0.01020408   CHI3L2
#&gt; DMKN      0.2965305 0.01020408     DMKN
#&gt; JUN       0.2865324 0.01020408      JUN
#&gt; CDK1      0.2831493 0.01020408     CDK1
#&gt; ID2       0.2830716 0.01020408      ID2
#&gt; CTC1      0.2813576 0.01020408     CTC1
#&gt; IFI16     0.2710781 0.01020408    IFI16
#&gt; KRT18     0.2704436 0.01020408    KRT18
#&gt; ITGA4     0.2689324 0.01020408    ITGA4
#&gt; PYGL      0.2584941 0.01020408     PYGL
#&gt; PSMB9     0.2523764 0.01020408    PSMB9
#&gt; MAP1B     0.2228242 0.04081633    MAP1B
#&gt; CXCR4     0.2227893 0.04081633    CXCR4
#&gt; HIST1H1C  0.2195790 0.04081633 HIST1H1C
#&gt; MYC       0.2099993 0.04081633      MYC
#&gt; SPRED2    0.1998300 0.04081633   SPRED2
#&gt; RNF138    0.1982636 0.04081633   RNF138
#&gt; LNP1      0.1882561 0.04081633     LNP1
#&gt; 
#&gt; $gating_genes
#&gt; [1] "ARHGDIB" "SOX4"    "DDIT4"  
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by J. Sebastian Paez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


